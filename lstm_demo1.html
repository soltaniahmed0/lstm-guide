<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Schéma LSTM (HTML + SVG)</title>
  <style>
    :root{--bg:#fff;--accent:#2b8cff;--soft:#f3f7ff;--sig:#c8f0c8;--tanh:#fff1a8}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; background:var(--bg); margin:0; padding:24px; color:#222}
    h1{font-size:20px;margin:0 0 16px}
    .canvas{max-width:1100px;margin:0 auto;background:#fff;padding:18px;border-radius:10px;box-shadow:0 6px 22px rgba(0,0,0,0.06)}
    .note{font-size:13px;color:#555;margin-bottom:12px}
    svg{width:100%;height:auto;display:block}
    .legend{font-size:13px}
    /* small responsive tweak */
    @media (max-width:700px){
      .canvas{padding:12px}
    }
  </style>
</head>
<body>
  <div class="canvas">
    <h1>Schéma pédagogique d'une cellule LSTM (SVG)</h1>
    <div class="note">Ce dessin reproduit le schéma classique : Forget / Input / Output gates, opérations point-par-point, et légende.
    </div>

    <!-- SVG diagram -->
    <svg viewBox="0 0 1200 420" xmlns="http://www.w3.org/2000/svg" aria-label="LSTM cell diagram">
      <defs>
        <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
          <path d="M 0 0 L 10 5 L 0 10 z" fill="#333" />
        </marker>
        <filter id="softShadow" x="-50%" y="-50%" width="200%" height="200%">
          <feDropShadow dx="0" dy="4" stdDeviation="6" flood-color="#000" flood-opacity="0.08"/>
        </filter>
      </defs>

      <!-- Background vertical centers -->
      <rect x="18" y="18" width="1164" height="384" rx="8" fill="none" stroke="transparent" />

      <!-- Dashed boxes for gates -->
      <rect x="40" y="40" width="300" height="300" rx="6" fill="none" stroke="#6fb4ff" stroke-width="2" stroke-dasharray="6 8" />
      <text x="60" y="36" font-size="14" fill="#2b8cff">Forget gate</text>

      <rect x="370" y="40" width="360" height="300" rx="6" fill="none" stroke="#ffa96f" stroke-width="2" stroke-dasharray="6 8" />
      <text x="390" y="36" font-size="14" fill="#ff8c2b">Input gate</text>

      <rect x="760" y="40" width="300" height="300" rx="6" fill="none" stroke="#7adf7a" stroke-width="2" stroke-dasharray="6 8" />
      <text x="780" y="36" font-size="14" fill="#43b352">Output gate</text>

      <!-- Ct-1 (left) -->
      <text x="18" y="200" font-size="13">C<sub>t-1</sub></text>
      <line x1="68" y1="200" x2="176" y2="200" stroke="#444" stroke-width="2" marker-end="url(#arrow)" />

      <!-- xt and ht-1 inputs from bottom-left -->
      <text x="18" y="260" font-size="13">h<sub>t-1</sub></text>
      <line x1="68" y1="260" x2="400" y2="260" stroke="#444" stroke-width="2" marker-end="url(#arrow)" />

      <text x="18" y="300" font-size="13">x<sub>t</sub></text>
      <line x1="68" y1="300" x2="400" y2="300" stroke="#444" stroke-width="2" marker-end="url(#arrow)" />

      <!-- Forget gate inner Sigmoid box -->
      <rect x="220" y="120" width="80" height="40" rx="6" fill="#dff2ff" stroke="#2b8cff" />
      <text x="240" y="148" font-size="13" fill="#2b8cff">Sig (f<sub>t</sub>)</text>

      <!-- Multiply circle (pointwise) for forget -->
      <g transform="translate(340,198)">
        <circle r="22" fill="#eef" stroke="#2b8cff" />
        <line x1="-16" y1="-16" x2="16" y2="16" stroke="#2b8cff" stroke-width="2" />
        <line x1="-16" y1="16" x2="16" y2="-16" stroke="#2b8cff" stroke-width="2" />
      </g>

      <!-- Arrow from Sig to Multiply (forget) -->
      <path d="M 260 140 C 300 140, 320 165, 325 180" fill="none" stroke="#2b8cff" stroke-width="2" marker-end="url(#arrow)" />

      <!-- Line from C_t-1 to multiply -->
      <path d="M 176 200 C 220 200, 260 200, 320 200" fill="none" stroke="#444" stroke-width="2" marker-end="url(#arrow)" />

      <!-- Input gate components -->
      <rect x="520" y="120" width="70" height="40" rx="6" fill="#fef7d6" stroke="#ff9f3b" />
      <text x="532" y="148" font-size="13" fill="#c76b00">Sig (i<sub>t</sub>)</text>

      <rect x="470" y="200" width="120" height="40" rx="6" fill="#fff8d0" stroke="#ff9f3b" />
      <text x="488" y="228" font-size="13" fill="#c76b00">tanh (Ĉ<sub>t</sub>)</text>

      <!-- Multiply combo for input gate (i_t ⊙ Ĉ_t) -->
      <g transform="translate(650,198)">
        <circle r="22" fill="#fff4e6" stroke="#ff9f3b" />
        <line x1="-16" y1="-16" x2="16" y2="16" stroke="#ff9f3b" stroke-width="2" />
        <line x1="-16" y1="16" x2="16" y2="-16" stroke="#ff9f3b" stroke-width="2" />
      </g>

      <!-- Addition circle to combine forget-result + input-result -->
      <g transform="translate(820,200)">
        <circle r="18" fill="#fff0f0" stroke="#ff8c8c" />
        <line x1="-12" y1="0" x2="12" y2="0" stroke="#ff8c8c" stroke-width="2" />
        <line x1="0" y1="-12" x2="0" y2="12" stroke="#ff8c8c" stroke-width="2" />
      </g>

      <!-- Output gate components -->
      <rect x="860" y="120" width="86" height="40" rx="6" fill="#e6ffe6" stroke="#46b04a" />
      <text x="872" y="148" font-size="13" fill="#22883a">Sig (o<sub>t</sub>)</text>

      <!-- tanh box for C_t before output multiply -->
      <rect x="900" y="200" width="72" height="40" rx="6" fill="#fff8d0" stroke="#999" />
      <text x="910" y="228" font-size="13" fill="#666">tanh (C<sub>t</sub>)</text>

      <!-- final multiply circle for output -->
      <g transform="translate(1000,220)">
        <circle r="22" fill="#e8ffea" stroke="#46b04a" />
        <line x1="-16" y1="-16" x2="16" y2="16" stroke="#46b04a" stroke-width="2" />
        <line x1="-16" y1="16" x2="16" y2="-16" stroke="#46b04a" stroke-width="2" />
      </g>

      <!-- Ct output -->
      <text x="880" y="68" font-size="13">C<sub>t</sub></text>
      <line x1="900" y1="80" x2="900" y2="140" stroke="#444" stroke-width="2" marker-end="url(#arrow)" />
      <line x1="900" y1="140" x2="910" y2="140" stroke="#444" stroke-width="2" marker-end="url(#arrow)" />

      <!-- arrows connecting components (simplified) -->
      <path d="M 360 198 C 420 198, 480 220, 520 220" stroke="#444" stroke-width="2" fill="none" marker-end="url(#arrow)" />

      <path d="M 720 198 C 760 198, 800 198, 820 198" stroke="#444" stroke-width="2" fill="none" marker-end="url(#arrow)" />

      <path d="M 840 198 C 880 198, 900 190, 900 180" stroke="#444" stroke-width="2" fill="none" marker-end="url(#arrow)" />

      <!-- lines from i_t and Ĉ_t to multiply -->
      <path d="M 530 140 C 560 150, 590 170, 630 186" stroke="#ff9f3b" stroke-width="2" fill="none" marker-end="url(#arrow)" />
      <path d="M 530 220 C 560 220, 600 210, 630 210" stroke="#ff9f3b" stroke-width="2" fill="none" marker-end="url(#arrow)" />

      <!-- lines connecting multiply-results to add-circle -->
      <path d="M 370 198 C 460 198, 540 198, 720 198" stroke="#444" stroke-width="2" fill="none" marker-end="url(#arrow)" />
      <path d="M 670 198 C 700 198, 740 198, 798 198" stroke="#444" stroke-width="2" fill="none" marker-end="url(#arrow)" />

      <!-- from addition to Ct box (tanh) and then to output tanh -->
      <path d="M 838 180 C 860 150, 900 150, 930 150" stroke="#ff8c8c" stroke-width="2" fill="none" marker-end="url(#arrow)" />

      <!-- From C_t box down to tanh before output gate -->
      <path d="M 900 170 C 900 185, 920 195, 940 195" stroke="#444" stroke-width="2" fill="none" marker-end="url(#arrow)" />

      <!-- final h_t output -->
      <line x1="1022" y1="220" x2="1140" y2="220" stroke="#222" stroke-width="2" marker-end="url(#arrow)" />
      <text x="1150" y="224" font-size="13">h<sub>t</sub></text>

      <!-- Legend boxes -->
      <rect x="28" y="350" width="260" height="48" rx="8" fill="#fafafa" stroke="#eee" />
      <text x="40" y="372" font-size="12" fill="#666">Sig = Sigmoid (0...1) &nbsp;&nbsp;&nbsp; tanh = Tanh (-1...+1)</text>
      <text x="40" y="392" font-size="12" fill="#666">⊙ = pointwise multiplication &nbsp; ⊕ = addition</text>

    </svg>

    <p class="legend">Le fichier ci-dessus est un SVG responsive : tu peux copier-coller ce code dans un fichier <code>lstm_diagram.html</code> et l'ouvrir dans ton navigateur pour l'utiliser ou l'adapter.</p>
  </div>
</body>
</html>
